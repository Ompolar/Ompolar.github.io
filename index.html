<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Title Page</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <!-- custom css -->
    <link rel="stylesheet" href="./assets/css/style.css?v=0.1" />
  </head>
  <body>
    <div class="container text-center">

    	<div class="row">
    		<div style="height: 200px;">
    			<h1>Welcome to <span class="server-title text-warning"></span> Server </h1>
    			<hr>

            <a
              class="btn btn-info invite-link"
              class="discord--link"
              target="_blank"
              >Join Server Kami
            </a>

    		</div>

    	</div>


      <div class="row">
        <div class="col-sm-4">
          <div class="channels">
            <div class="channels--header">
              <h2>Channels :</h2>
            </div>
            <div class="channels--body">
              <ul class="list-group"></ul>
              <hr />
              <h3>Bot yg kami pakai :</h3>
              <hr />
              <div class="d-flex flex-wrap" id="bot_list"></div>
            </div>
          </div>
        </div>
        <div class="col-sm-8">
          <h2 >User yg lagi onlen :</h2>
          <hr />
          <div class="d-flex flex-wrap" id="user_list"></div>

          <h3 class="text-success">User yg lagi main gem :</h3>
          <hr />
          <div class="d-flex flex-wrap" id="user_list_game"></div>
        </div>
      </div>
    </div>

    <div class="container">
      <div id="oke"></div>

      =============================================================

      <div class="wrap">
        <div class="name--header">
          <div class="name"></div>

          <div class="discord">

          </div>
        </div>

        <div class="row">
          <div class="col-md-4"></div>

          <div class="col-md-8"></div>
        </div>
      </div>
    </div>

    <script id="daftar_user_discord_onlen" type="text/template">
      <div class="col-sm-4 col-6">
      	<div class="thumbnail">
      	<img class="img-thumbnail borderds" width="200px" heigh="200px" src="%src_gambar%" alt="...">
      	<div class="caption mt-2">
      		<h3>%nama_user%</h3>
      	</div>
      	</div>
      </div>
    </script>

    <script id="daftar_user_discord_onlen_in_game" type="text/template">
      <div class="col-sm-4 col-6">
      	<div class="thumbnail">
      	<img class="img-thumbnail" width="200px" heigh="200px" src="%src_gambar%" alt="...">
      	<div class="caption mt-2">
      		<h3>%nama_user%</h3>
      		<p> %nama_game%</p>
      	</div>
      	</div>
      </div>
    </script>

    <script id="daftar_user_discord_onlen_bot" type="text/template">
      <div class="col-3">
      	<div class="thumbnail" style="height: 80px; width: 80px;">
      	<img data-bs-toggle="tooltip" data-bs-placement="top"
        data-bs-custom-class="custom-tooltip"
        data-bs-title=" %nama_user%" class="img-thumbnail" width="80px" heigh="80px" src="%src_gambar%" alt="...">
      	</div>
      </div>
    </script>
  </body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>

  <script type="text/javascript">
    form_data = {};
    $.ajax({
      url: "https://discord.com/api/guilds/604606442393042945/widget.json",
      type: "GET",
      data: form_data,
      error: function (err) {
        $("#loading").hide();
        swal("Oops, something went wrong!", null, "error");
      },
      success: function (ok) {
        // let data = JSON.parse(ok);
        document.title = ok.name;
        $('.server-title').html(ok.name);
        $(".invite-link").attr("href", ok.instant_invite);
        var bot_list = [
          "Maki",
          "Pancake",
          "ProBot âœ¨",
          "[t!] Tatsumaki",
          "[!] SlugBot",
          "[,] Shinobu",
          "[?] Dyno",
          "[s/] ServerStats",
          "Jockie Music (3)",
        ];

        // var obj = jQuery.parseJSON(response);
        $.each(ok.members, function (key, value) {
          if (bot_list.includes(value.username)) {
            // check apakah user sedang main game
            $("#bot_list").append(
              $("#daftar_user_discord_onlen_bot")
                .html()
                .replace(/%src_gambar%/g, value.avatar_url)
                .replace(/%nama_user%/g, value.username)
            );
          }

          if (!bot_list.includes(value.username)) {
            // check apakah user sedang main game
            if (JSON.stringify(value).includes("game")) {
              $("#user_list_game").append(
                $("#daftar_user_discord_onlen_in_game")
                  .html()
                  .replace(/%src_gambar%/g, value.avatar_url)
                  .replace(/%nama_user%/g, value.username)
                  .replace(/%nama_game%/g, value.game.name)
              );
            } else {
              $("#user_list").append(
                $("#daftar_user_discord_onlen")
                  .html()
                  .replace(/%src_gambar%/g, value.avatar_url)
                  .replace(/%nama_user%/g, value.username)
              );
            }
          }
        });

        // daftar channel
        $.each(ok.channels, function (key, value) {
          $(".list-group").append(
            '<li class="list-group-item">' + value.name + "</li>"
          );
        });

        // // $('#loading').hide();
        // $('#oke').html(ok);
      },
    });
  </script>
  <!-- Bootstrap JavaScript -->

  <script src="https://unpkg.com/@popperjs/core@2"></script>

  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"
  ></script>
  <script type="text/javascript">
    const tooltipTriggerList = document.querySelectorAll(
      '[data-bs-toggle="tooltip"]'
    );
    const tooltipList = [...tooltipTriggerList].map(
      (tooltipTriggerEl) => new bootstrap.Tooltip(tooltipTriggerEl)
    );
  </script>
</html>

<!-- <iframe src="https://discord.com/widget?id=604606442393042945&theme=dark" width="350" height="500" allowtransparency="true" frameborder="0" sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"></iframe> -->
